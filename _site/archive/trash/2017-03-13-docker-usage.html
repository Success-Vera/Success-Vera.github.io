

<!DOCTYPE html>
<html >

  <head>

    
    

<meta charset="utf-8"/>
<meta name="author" content="Ifeoma Veronica Nwabufo"/>


<meta name="keywords" content="docker"/>


<!-- Enable responsive viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<!-- atom & rss feed -->
<link href="" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"/>

<!--
<link href="" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"/>
-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="images/favicon.ico"/>
    
	<!--

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [ ['$','$'], ['\(', '\)'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true,
    }
  });
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->
    <title>Docker Usage - Ifeoma Veronica Nwabufo's Website</title>

    <!-- normalize.css -->
    <link rel="stylesheet" type="text/css" media="all"
          href="/bower_components/normalize-css/normalize.css" >
    <!-- include the bootstap style sheet -->
    <link rel="stylesheet"  type="text/css"
          href="/bower_components/bootstrap-css/css/bootstrap.min.css">
    <!-- include the syntax highlight style sheet -->
    <link rel="stylesheet" type="text/css" media="all"
          href="/css/syntax.css" >
    <!-- include the customized style sheet -->
    <link rel="stylesheet" type="text/css" media="all"
          href="/css/customize.css">
    <!-- add the page specified style sheet settings -->

    

    <!-- jquery -->
    <script type="text/javascript"
            src="/bower_components/jqueryjs/jquery.js"></script>
    <!-- bootstrap -->
    <script type="text/javascript"
            src="/bower_components/bootstrap-css/js/bootstrap.min.js"></script>

    <!-- handle the DOM ready event, compatible with different browsers. -->
    <script type="text/javascript"
            src="/bower_components/domready/ready.min.js"></script>
    <!-- support the extended regular expression -->
    <script type="text/javascript"
            src="/bower_components/xregexp/min/xregexp-all-min.js"></script>
    <!-- fix the extra spaces between CJK characters introduced by the line
         break in the source -->
    <script type="text/javascript"
            src="/bower_components/fix-cjk-linebreak/fix-cjk-linebreak.js"></script>

    <!-- other customied scripts -->
    <script type="text/javascript"
            src="/js/customize.js"></script>

	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [ ['$', '$'] ],
			displayMath: [ ['$$', '$$']],
			processEscapes: true,
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
		},
		messageStyle: "none",
		"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
	</script>
	<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  </head>

  <body>
    

<div class="navbar">
  <div class="navbar-inner">
    <div class="container-narrow">
      <a class="brand" href="/">Ifeoma Veronica Nwabufo</a>
      <ul class="nav pull-right">
        
           
             





<li>
  <a href="/index.html">Home</a>
</li>

           
        
           
             





<li>
  <a href="/projects.html">Projects</a>
</li>

           
        
           
             





<li>
  <a href="/publications.html">Publications</a>
</li>

           
        
           
             





<li>
  <a href="/cv.html">Curriculum Vitae</a>
</li>

           
        
           
             





<li>
  <a href="/gallery.html">Gallery</a>
</li>

           
        
        


      </ul>
    </div>
  </div>
</div>

    <div class="container-narrow">
      <div class="content">
        <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<div class="page-header">
  <h1>Docker Usage
      </h1>
</div>

<div class="post-info">
  
<link rel="stylesheet" href="/glyphicons/css/glyphicons.css">
<div class="category-info">
  <ul class="tag_box inline">
  
    <li><i class="icon-folder-open"></i></li>
    
    


  
     
    	<li><a href="/coding.html">
    		coding <sup></sup>
    	</a></li>
    
  


    
  
    <li><i class="icon-tags"></i></li>
    
    


  
     
    	<li><a href="/tags.html#docker-ref">docker <sup></sup></a></li>
    
  



    
  </ul>
</div>
  

<div class="source-info">
  <p>
  <span class="date"></span>
  &nbsp
  
  </p>
</div>

</div>
<div id="post-content" class="post-content">
   <ul id="markdown-toc">
  <li><a href="#commands" id="markdown-toc-commands">Commands</a>    <ul>
      <li><a href="#build-image-and-run" id="markdown-toc-build-image-and-run">Build image and Run</a></li>
    </ul>
  </li>
</ul>

<h3 id="commands">Commands</h3>

<ol>
  <li>List all running container
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker ps
</code></pre></div>    </div>
  </li>
  <li>List all container
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker ps <span class="nt">-a</span>
</code></pre></div>    </div>
  </li>
  <li>Remove a container
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker <span class="nb">rm </span>6766afe8f0ad <span class="c"># here 6766afe8f0ad is the container ID</span>
</code></pre></div>    </div>
  </li>
  <li>List all images
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker images
</code></pre></div>    </div>
  </li>
  <li>Go into an existing container
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># start the container</span>
<span class="nb">sudo </span>docker start 6766afe8f0ad
<span class="c"># exec command in container</span>
<span class="nb">sudo </span>docker <span class="nb">exec</span> <span class="nt">-ti</span> 6766afe8f0ad /bin/bash
<span class="c"># stop the container</span>
<span class="nb">sudo </span>docker stop 6766afe8f0ad
</code></pre></div>    </div>
  </li>
  <li>Find nvidia drive version
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">nvidia_version</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /proc/driver/nvidia/version | <span class="nb">head</span> <span class="nt">-n</span> 1 | <span class="nb">awk</span> <span class="s1">'{ print $8 }'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="nv">$nvidia_version</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="build-image-and-run">Build image and Run</h4>
<p>There should be a <code class="highlighter-rouge">Dockerfile</code> in the directory, in which there is command you need to install into the image. For example this <code class="highlighter-rouge">Dockerfile</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM ubuntu
MAINTAINER github/gklingler

RUN apt-get update
RUN apt-get <span class="nb">install</span> <span class="nt">-y</span> mesa-utils
RUN apt-get <span class="nb">install</span> <span class="nt">-y</span> module-init-tools
RUN apt-get <span class="nb">install</span> <span class="nt">-y</span> glmark2
RUN apt-get <span class="nb">install</span> <span class="nt">-y</span> lsb-core libfontconfig1 libxrender1 libxtst6 libglu1-mesa libglib2.0-0 libsm6 xdg-utils wget
RUN <span class="nb">cd</span> /home/
RUN wget https://dl.google.com/dl/earth/client/current/google-earth-stable_current_amd64.deb
RUN dpkg <span class="nt">-i</span> google-earth-stable_current_amd64.deb

<span class="c"># install nvidia driver</span>
RUN apt-get <span class="nb">install</span> <span class="nt">-y</span> binutils
ADD NVIDIA-DRIVER.run /tmp/NVIDIA-DRIVER.run
RUN sh /tmp/NVIDIA-DRIVER.run <span class="nt">-a</span> <span class="nt">-N</span> <span class="nt">--ui</span><span class="o">=</span>none <span class="nt">--no-kernel-module</span>
RUN <span class="nb">rm</span> /tmp/NVIDIA-DRIVER.run
</code></pre></div></div>

<p>Build the image with command</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">nvidia_version</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /proc/driver/nvidia/version | <span class="nb">head</span> <span class="nt">-n</span> 1 | <span class="nb">awk</span> <span class="s1">'{ print $8 }'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="nv">$nvidia_version</span>
<span class="c"># We must use the same driver in the image as on the host</span>
<span class="k">if </span><span class="nb">test</span> <span class="o">!</span> <span class="nt">-f</span> nvidia-driver.run<span class="p">;</span> <span class="k">then
  </span><span class="nb">echo </span>here
  <span class="nv">nvidia_driver_uri</span><span class="o">=</span>http://us.download.nvidia.com/XFree86/Linux-x86_64/<span class="k">${</span><span class="nv">nvidia_version</span><span class="k">}</span>/NVIDIA-Linux-x86_64-<span class="k">${</span><span class="nv">nvidia_version</span><span class="k">}</span>.run
  wget <span class="nt">-O</span> nvidia-driver.run <span class="nv">$nvidia_driver_uri</span>
<span class="k">fi

</span><span class="nb">sudo </span>docker build <span class="nt">-t</span> opengl-nvidia:<span class="k">${</span><span class="nv">nvidia_version</span><span class="k">}</span> <span class="nb">.</span>
<span class="nb">sudo </span>docker tag opengl-nvidia:<span class="k">${</span><span class="nv">nvidia_version</span><span class="k">}</span> opengl-nvidia:latest
</code></pre></div></div>

<p>Then if you want to run the image, using</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>docker run <span class="nt">--privileged</span> <span class="nt">-e</span> <span class="s2">"DISPLAY=unix:0.0"</span> <span class="nt">-v</span><span class="o">=</span><span class="s2">"/tmp/.X11-unix:/tmp/.X11-unix:rw"</span>  <span class="nt">-i</span> <span class="nt">-t</span> opengl-nvidia:latest /bin/bash
</code></pre></div></div>


   

</div>
<script type="text/javascript">
  var el = document.getElementById("post-content");
  fix_cjk_linebreak(el);
  fix_table_style(el);
</script>
<div class="sharing align-right">
  <!--

  
    
        <div id="fb-root inline"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-like inline" 
     data-href="/archive/trash/2017-03-13-docker-usage.html" 
     
     data-layout="button_count" 
     
     
     data-width="90" 
     
     
     data-show-faces="false" 
     
     data-send="false">
</div>
      
  
    
        <div class="g-plusone inline"
      data-size="medium" 
      data-annotation="bubble" 
      
      data-width="20"
      
></div>

<script type="text/javascript">
(function() {
  var po = document.createElement('script'); 
  po.type = 'text/javascript';
  po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; 
  s.parentNode.insertBefore(po, s);
})();
</script>

      
  

-->
</div>
<div class="align-center">
  

<link rel="stylesheet" href="/glyphicons/css/glyphicons.css" />

<div class="pagination">
  <ul>
  
    <li class="prev disabled">
      <a> <em class="icon-left-arrow"></em> </a>
    </li>
  
    <li>
      <a href="/archive.html">&nbsp;&nbsp;<em class="icon-more-items"></em>&nbsp;&nbsp;</a>
    </li>
  
    <li class="next disabled">
      <a> <em class="icon-right-arrow"></em> </a>
    </li>
  
  </ul>
</div>
</div>
<hr/>


<a href="#" class="back-to-top">Back to Top</a>
<style>
a.back-to-top {
    display: none;
    width: 60px;
    height: 60px;
    text-indent: -9999px;
    position: fixed;
    z-index: 999;
    right: 20px;
    bottom: 20px;
    background: #eee url("images/angle-up.svg") no-repeat center 40%;
    background-size: 35px 35px;
    -webkit-border-radius: 30px;
    -moz-border-radius: 30px;
    border-radius: 30px;
}
</style>

<script type="text/javascript">
    $('body').prepend('<a href="#" class="back-to-top">Back to Top</a>');
    var amountScrolled = 10;
    var duration = 300;
    $(window).scroll(function() {
        if ( $(window).scrollTop() > amountScrolled ) {
            $('a.back-to-top').fadeIn('slow');
        } else {
            $('a.back-to-top').fadeOut('slow');
        }
    });

    jQuery('.back-to-top').click(function(event) {
      event.preventDefault();
      jQuery('html, body').animate({scrollTop: 0}, duration);
      return false;
    })
</script>

<script type="text/javascript">
function dashangToggle()
{
  $(".shang_box").fadeToggle();
}
function changeItem(i)
{
  var k = 3;
  for(var j = 0;j < k;j++)
  {
    if(j == i)
    {
      document.getElementById("sl_shang" + j).style.display = "block";
    }
    else
    {
      document.getElementById("sl_shang" + j).style.display = "none";
    }
  }
}
function opay()
{
  document.getElementById("sl_shang").target="_parent";
}
</script>

<style>
.sy_shang{
  clear:both;
  overflow:hidden;
}
.shang_box{
  width:200px;
  max-width:98%;
  height:300px;
  padding:10px;
  background-color:#ddd;
  border-radius:26px;
  position:inherit;
  z-index:1000;
  border:3px dotted #dedede;
  display:none;
}
.dashang{
  display:block;
  width:80px;
  margin:5px auto;
  height:17px;
  line-height:14px;
  padding:10px;
  background-color:#E74851;
  color:#fff !important;
  text-align:center;
  text-decoration:none;
  border-radius:10px;
  font-size:17px;
  font-style: italic;
  transition:all 0.3s;
}
.dashang:hover
{
  opacity:1.2;
  font-size:18px;
}
#sl_shang0,#sl_shang1,#sl_shang2
{
  text-align:center;
}
#sl_shang0 img,#sl_shang1 img,#sl_shang2 img
{
  max-width:180px;
}
.sl_shang
{
  overflow:hidden;
}
.sl_shang b { font-size:18px; }
.sl_shang ul{ margin-top:10px; clear:both; overflow:hidden; }
.sl_shang li{ float:left; }
</style>

<!-- <center>
<div class="sy_shang">
  <a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">
    <table>
      <col width="50%">
      <col width="50%">
      <tr>
        <td align="center" valign="top"><em class="icon-coins"></em></td>
        <td align="right" valign="top">Donate</td>
      </tr>
    </table>
  </a>

<div class="shang_box">
  <a href="javascript:void(0)" onclick="dashangToggle()" title="关闭" style="float:right;"><em class="icon-remove-2"></em></a>

<div id="sl_shang" onsubmit="return postcheck()">
  <div class="sl_shang">
    <i>How to Donate:</i>
    <table width="80%">
      <col width="50%">
      <col width="50%">
    <tr>
      <td align="center" valign="middle"><input type="radio" name="paytype" onclick="opay();return changeItem(0);" checked="checked"/>
        </td>
      <td align="center" valign="bottom"><input type="radio" name="paytype" onclick="opay();return changeItem(1);" />
        </td>
      </tr>
    <tr>
      <td align="center" valign="middle"> Alipay </td>
      <td align="center" valign="middle"> WeChat </td>
    </tr>
    </table>
  </div>

<div id="sl_shang0">
  <img src="images/alipay.jpg">
  <br> Open Alipay and Scan
</div>

<div id="sl_shang1" style="display:none;">
  <img src="images/wechat.jpg">
  <br> Open WeChat and Scan
</div>

</center> -->

      </div>
      <hr/>
      <!--

<div style='text-align:center;'>
  <p>&copy; 2023 Ifeoma Veronica Nwabufo
    with help from <a href="http://jekyllbootstrap.com"
                      target="_blank"
                      title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
    and <a href="http://twitter.github.com/bootstrap/"
           target="_blank">Twitter Bootstrap</a>
    <br/>
    <a rel="license" class="cc-logo" target="_blank" href="">
      
    </a>
    This work is licensed under a
    <a rel="license" target="_blank" href="">
      Creative Commons License
    </a>
  </p>
</div>
-->
    </div>
    
  <div style="display:none;">
  <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=100&d=t7DslErsFCxmkrmJJEHTOzpoZGpkDt1-vHFIeXzC0gc&t=n'></script>
  </div>
  </body>
</html>



